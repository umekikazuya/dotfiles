#!/bin/sh

# 現在のブランチ名を取得
current_branch=$(git rev-parse --abbrev-ref HEAD)

# ユーザーに確認を求める
# 出力を標準エラー出力にリダイレクトすることで、gitのメッセージと区別しやすくする
echo >&2 "------------------------------------------------------------------------"
echo >&2 "ちょ待てよ。ブランチ (${current_branch}) をプッシュするよ？ (y/n): "
echo >&2 "------------------------------------------------------------------------"

# ユーザーからの入力を受け付ける
read -r answer < /dev/tty

if [ "$answer" != "y" ]; then
  echo >&2 "プッシュを中止しました。"
  exit 1
fi

# 入力が "y" の場合はプッシュを継続（スクリプトを終了コード0で終了）
exit 0
